"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1375],{89705:function(e,n,t){t.d(n,{EM:function(){return c},VV:function(){return v},_O:function(){return s},b8:function(){return d}});var i=t(5362),u=t(27218),r=t(27895),o=t(13262),a=t(10228),l=t(77930);let c=()=>{let{account:e,activeOrganization:n}=(0,u.t)(),t=null==e?void 0:e.uuid,c=null==n?void 0:n.uuid,{addError:d}=(0,r.e)(),s=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(c,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{s.invalidateQueries({queryKey:[o.dY,{orgUuid:c,accountUuid:t,syncSourceType:a.Fg.GDRIVE}]})},300)},onError:e=>{d(e)}})},d=()=>{let{activeOrganization:e}=(0,u.t)(),n=null==e?void 0:e.uuid,{addError:t}=(0,r.e)(),c=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(n,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{c.invalidateQueries({queryKey:[o.dY,{orgUuid:n,syncSourceType:a.Fg.GDRIVE}]})},onError:e=>{t(e)}})},s=e=>{let{activeOrganization:n}=(0,u.t)(),t=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(t,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0}})},v=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:t}=(0,u.t)(),r=null==t?void 0:t.uuid;return(0,i.WE)("/api/organizations/".concat(r,"/projects/").concat(e,"/kb/stats"),{queryKey:[o.rt,{orgUuid:r,projectUuid:e}],enabled:!!e&&n})}},2949:function(e,n,t){t.d(n,{$Z:function(){return O},Aj:function(){return E},EU:function(){return L},En:function(){return I},MN:function(){return h},Mv:function(){return A},Xv:function(){return w},ez:function(){return P},mD:function(){return D},nC:function(){return T},oE:function(){return S},qZ:function(){return R},r7:function(){return N},td:function(){return z},u7:function(){return q}});var i=t(19170),u=t(5362),r=t(27218),o=t(13262),a=t(87033),l=t(10228),c=t(88755),d=t(77930),s=t(81695),v=t(7653),g=t(89705),p=t(51879),_=t(22534),f=t(19132),y=t(68571);let m="gdrive_success",h=()=>{let e=(0,r.Cf)(),{data:n}=(0,f.tc)(),t=!!(Array.isArray(n)&&n.find(e=>e.type===l.Fg.GDRIVE&&e.enabled));return!e||t},b=()=>{let{value:e}=(0,a.FL)("kingfisher_enabled");return e},E=()=>{let e=h(),n=b();return!!(!y.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION&&n&&e)},S=()=>{let{account:e,activeOrganization:n}=(0,r.t)(),t=null==n?void 0:n.uuid,i=E(),{data:a,isFetched:l}=(0,u.WE)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[o.Yw,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:i,staleTime:3e5});return{isAuthenticated:i&&!!(null==a?void 0:a.is_authenticated),isFetched:l}},C=e=>{let{callerIdentifier:n}=e,t=(0,s.usePathname)(),{account:i,activeOrganization:a}=(0,r.t)(),l=null==i?void 0:i.uuid,g=null==a?void 0:a.uuid,p=E(),_=(0,s.useRouter)(),y=(0,d.useQueryClient)(),h=(0,c.Q)(),b=(0,s.useSearchParams)(),{mutate:S}=(0,u.uC)("/api/organizations/".concat(g,"/sync/mcp/drive/auth/start"),"POST",{enabled:p,onSuccess:e=>{_.push(e.redirect_url)}}),C=(0,v.useRef)(!1);return()=>{if(!p)return;let e="".concat(m,"=").concat(n),i=(0,f.LZ)({pathname:t,searchParams:b,queryString:e,isClaudeApp:h});if(y.invalidateQueries({queryKey:[o.Yw,{accountUUID:l,orgUUID:g}]}),h){window.open("/settings/integrations?open_in_browser=1&auth_start=gdrive&origin=".concat(i));return}C.current||(C.current=!0,S({pre_auth_state:{origin:i},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}},T=function(){let{callerIdentifier:e,handleAuthSuccess:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAuthenticated:t,isFetched:i}=S(),{dropdownToOpen:u,clearCallerIdentifier:r}=(0,p.J)(),o=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null==n||n(e)},a=C({callerIdentifier:e});return(0,f.BZ)({callerIdentifier:e,successParam:m,handleOpen:o}),(0,v.useEffect)(()=>{e&&u===e&&(null==n||n(!0),r())},[u,n,e,r]),{isDriveAuthenticated:t,initDriveAuth:a,handleDriveTrigger:o,isFetched:i}},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,r.t)(),i=null==n?void 0:n.uuid,a=null==t?void 0:t.uuid,l=E(),c=(0,d.useQueryClient)(),{mutate:s}=(0,g.b8)();return(0,u.uC)("/api/organizations/".concat(a,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&l),...e,onSuccess:function(){for(var n,t=arguments.length,u=Array(t),r=0;r<t;r++)u[r]=arguments[r];c.invalidateQueries({queryKey:[o.Yw,{accountUUID:i,orgUUID:a}]}),s({}),null===(n=e.onSuccess)||void 0===n||n.call(e,...u)}})},A=e=>{let{documentId:n}=e,{account:t,activeOrganization:i}=(0,r.t)(),a=null==t?void 0:t.uuid,l=null==i?void 0:i.uuid,c=E(),s=(0,d.useQueryClient)(),g=(0,u.WE)("/api/organizations/".concat(l,"/sync/mcp/drive/document/").concat(n,"?include_content=false"),{queryKey:[o.HI,{accountUUID:a,orgUUID:l,documentId:n}],enabled:c,meta:{noToast:!0}}),p=g.isError;return(0,v.useEffect)(()=>{p&&s.invalidateQueries({queryKey:[o.Yw,{accountUUID:a,orgUUID:l}]})},[s,p,a,l]),g};function w(e){let{uri:n}=e,{data:t,isLoading:i}=A({documentId:n});return{title:null==t?void 0:t.title,isLoading:i}}let D=e=>{let{account:n,activeOrganization:t}=(0,r.t)(),i=null==n?void 0:n.uuid,a=null==t?void 0:t.uuid,l=E(),c=(0,v.useMemo)(()=>e.map(e=>"/api/organizations/".concat(a,"/sync/mcp/drive/document/").concat(e)),[e,a]),d=(0,v.useMemo)(()=>({queryKey:e.map(e=>[o.Yp,{accountUUID:i,orgUUID:a,documentId:e}]),enabled:l,meta:{noToast:!0}}),[e,i,a,l]);return(0,u.Nl)(c,d)},z=e=>{let{account:n,activeOrganization:t}=(0,r.t)(),i=null==n?void 0:n.uuid,a=null==t?void 0:t.uuid,l=E(),c=(0,_.F7)(),{data:d,isSuccess:s,isLoading:g}=(0,u.WE)("/api/organizations/".concat(a,"/sync/mcp/drive/recents"),{queryKey:[o.s8,{accountUUID:i,orgUUID:a}],enabled:e&&l,meta:{noToast:!0}});return(0,v.useEffect)(()=>{if(s&&d){let e=d.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,_.MU)(e)}},[s,d]),{recentDriveDocs:s?d:c,isLoading:g}},O=()=>{let e=b(),{value:n}=(0,a.FL)("apps_use_bananagrams");return e&&n},P=()=>{let e=E(),n=O();return e&&n&&!y.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION},L=e=>{var n;let t=P(),{account:i}=(0,r.t)();return!!t&&(e?!!(null==e?void 0:null===(n=e.conversationSettings)||void 0===n?void 0:n.enabled_bananagrams):!!(null==i?void 0:i.settings.enabled_bananagrams))},q=()=>(0,a.FL)("rag_prototype").value,N=()=>{let e=P(),n=(0,r.Cf)(),{data:t}=(0,f.tc)(),{account:i}=(0,r.t)(),u=q();return!!e&&!!u&&(n?!!(Array.isArray(t)&&t.find(e=>{var n;return e.type===l.Fg.GDRIVE&&e.enabled&&(null===(n=e.config)||void 0===n?void 0:n.allow_indexing)})):!!(null==i?void 0:i.settings.enabled_gdrive_indexing))},R=()=>{let{account:e}=(0,r.t)(),{mutate:n}=(0,i.Ck)(),{mutate:t}=(0,g.EM)();return{toggleDriveSearchAndIndexingEnabled:i=>{var u;let{indexingEnabled:r,searchEnabled:o,dismissBanner:a}=i,l=a||!!r;r&&t({}),n({...null==e?void 0:e.settings,...void 0!==r?{enabled_gdrive_indexing:r}:null,...void 0!==o||!0===r?{enabled_bananagrams:null!=r?r:o}:null,...l?{dismissed_claudeai_banners:[...(null==e?void 0:null===(u=e.settings)||void 0===u?void 0:u.dismissed_claudeai_banners)||[],{banner_id:"drive_indexing_enablement_2/11_1",dismissed_at:new Date().toISOString()}]}:null})}}}},89111:function(e,n,t){t.d(n,{H7:function(){return E},Mr:function(){return S},N:function(){return b},Y$:function(){return I},Yn:function(){return h}});var i,u,r,o,a=t(5362),l=t(27218),c=t(13262),d=t(10228),s=t(88755),v=t(77930),g=t(81695),p=t(7653),_=t(19132),f=t(68571);let y="github_success";(i=r||(r={})).PENDING="pending",i.STARTED="started",i.COMPLETED="completed",i.FAILED="failed",(u=o||(o={})).PATH_NOT_FOUND="path_not_found",u.INVALID_SHA="invalid_sha",u.SIZE_LIMIT_EXCEEDED="size_limit_exceeded",u.SOURCE_MISSING_OR_CHANGED="source_missing_or_changed";let m=e=>{let{shouldFetch:n=!1}=e,{activeOrganization:t}=(0,l.t)(),i=null==t?void 0:t.uuid,u=E();return(0,a.WE)("/api/organizations/".concat(i,"/sync/github/auth"),{queryKey:[c.Os,{orgUUID:i}],enabled:!!(n&&t&&u)})},h=function(){var e;let{callerIdentifier:n,toggleGithubModalOpen:t,fetchImmediately:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:u}=(0,l.t)(),r=null==u?void 0:u.uuid,o=E(),c=(0,g.useRouter)(),[d,v]=(0,p.useState)(i),f=m({shouldFetch:d}),h=(0,p.useCallback)(async()=>{var e,n;return d?null===(n=f.data)||void 0===n?void 0:n.is_authenticated:(v(!0),null===(e=(await f.refetch()).data)||void 0===e?void 0:e.is_authenticated)},[f,d]),{mutate:b}=(0,a.uC)("/api/organizations/".concat(r,"/sync/github/auth/start"),"POST",{enabled:!!(u&&o),onSuccess:e=>{c.push(e.redirect_url)}}),S="".concat(y,"=").concat(n);(0,_.BZ)({callerIdentifier:n,successParam:y,handleOpen:()=>{null==t||t(!0)}});let C=(0,g.useSearchParams)(),T=(0,s.Q)(),I=(0,p.useRef)(!1),A=(0,g.usePathname)(),w=(0,_.LZ)({pathname:A,searchParams:C,queryString:S,isClaudeApp:T});return{checkIsGithubAuthenticated:h,initGithubAuth:()=>{if(o){if(T){window.open("/settings/integrations?open_in_browser=1&auth_start=github&origin=".concat(w));return}I.current||(I.current=!0,b({pre_auth_state:{origin:w}}))}},isGithubAuthenticated:!!(null===(e=f.data)||void 0===e?void 0:e.is_authenticated)}},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,l.t)(),t=null==n?void 0:n.uuid,i=E(),u=(0,v.useQueryClient)();return(0,a.uC)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&i),...e,onSuccess:function(){for(var n,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];u.invalidateQueries({queryKey:[c.Os,{orgUUID:t}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...r)}})},E=()=>{let{data:e}=(0,_.tc)(),n=(0,l.Cf)(),t=!!(Array.isArray(e)&&e.find(e=>e.type===d.Fg.GITHUB&&e.enabled));return!!(!f.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!n||t))},S=()=>{let{activeOrganization:e}=(0,l.t)(),n=null==e?void 0:e.uuid,t=E();return(0,a.WE)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[c.wD,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},C=e=>{let{owner:n,repo:t,branch:i}=e,{activeOrganization:u}=(0,l.t)(),r=null==u?void 0:u.uuid,o=E(),d=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,a.WE)("/api/organizations/".concat(r,"/sync/github/repo?").concat(d),{queryKey:[c.Rz,{orgUUID:r,owner:n,repo:t}],enabled:!!(n&&t&&!i&&u&&o),meta:{noToast:!0}})},T=e=>{let{owner:n,repo:t,branch:i}=e,{activeOrganization:u}=(0,l.t)(),r=null==u?void 0:u.uuid,o=E();return(0,a.WE)("/api/organizations/".concat(r,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(i),{queryKey:[c.E0,{orgUUID:r,owner:n,repo:t,branch:i}],staleTime:3e5,enabled:!!(n&&t&&i&&u&&o),meta:{noToast:!0}})},I=e=>{var n;let{owner:t,repo:i,branch:u}=e,r=C({owner:t,repo:i,branch:u}),o=T({owner:t,repo:i,branch:u||(null===(n=r.data)||void 0===n?void 0:n.default_branch)});return{data:{repo:r.data,tree:o.data},isFetching:r.isFetching||o.isFetching,error:r.error||o.error}}},51375:function(e,n,t){t.d(n,{hX:function(){return m},PQ:function(){return z},q:function(){return w},YB:function(){return I},si:function(){return S},cH:function(){return h},S9:function(){return E},Pl:function(){return T},tF:function(){return C},$Y:function(){return A}}),t(95622);var i=t(19170),u=t(28803),r=t(3053),o=t(27218),a=t(87033),l=t(88755),c=t(76736),d=t.n(c),s=t(81695),v=t(7653),g=t(41270),p=t(91217),_=t(58183),f=t(85465),y=t(19132);let m=(0,v.createContext)({mcpClients:{},servers:[],mcpTools:[],isLoading:!1,isEnabled:!1}),h=()=>{let e=(0,v.useContext)(m);return e||console.warn("useMcp being used outside of McpProvider, this is probably a bug"),e},b=()=>{let{value:e}=(0,a.FL)("claude_ai_allow_tool_always_allow");return e},E=()=>{let e=b(),{getMcpToolApprovalRequestSetting:n}=function(){let{value:e}=(0,_.useDynamicConfig)("mcp_tool_approval_config"),n=(0,v.useCallback)((n,t,i)=>{var u,r,o,a;return e?(null===(u=e[n])||void 0===u?void 0:u[t])!==void 0?e[n][t]:(null===(r=e[n])||void 0===r?void 0:r["*"])!==void 0?e[n]["*"]:(null===(o=e["*"])||void 0===o?void 0:o[t])!==void 0?e["*"][t]:(null===(a=e["*"])||void 0===a?void 0:a["*"])!==void 0?e["*"]["*"]:i:i},[e]);return{toolApprovalConfig:e,getMcpToolApprovalRequestSetting:n}}();return{getApprovalSetting:(0,v.useCallback)((t,i)=>{var u;let r=n(null!=t?t:"",null!==(u=null==i?void 0:i.name)&&void 0!==u?u:"",e?"perChat":"always");return{approvalSetting:r,alwaysAllowEnabled:"perChat"===r}},[e,n])}},S=()=>{let{activeOrganization:e}=(0,o.t)(),n=(0,s.usePathname)(),t=(0,s.useSearchParams)(),i=(0,l.Q)(),u=(0,y.LZ)({pathname:n,searchParams:t,queryString:"",isClaudeApp:i});return n=>{window.location.href="/api/organizations/".concat(null==e?void 0:e.uuid,"/mcp/start-auth/").concat(n.uuid,"?redirect_url=").concat(u,"&open_in_browser=1")}},C=()=>{let{servers:e}=h();return!!(0,l.Q)()&&(e.filter(e=>{let{type:n}=e;return"local"===n})||[]).length>0},T=()=>{var e,n,t;let i=(0,p.r)(),u=(null===(e=i.pendingConversationSettings)||void 0===e?void 0:e.compass_mode)==="advanced"||(null===(t=i.conversation)||void 0===t?void 0:null===(n=t.conversationSettings)||void 0===n?void 0:n.compass_mode)==="advanced",{servers:r}=h(),o=(r.filter(e=>{let{type:n}=e;return"remote"===n})||[]).length>0;return u&&o},I=()=>{var e;let n=null!==(e=(0,f.gE)("enabled_mcp_tools"))&&void 0!==e?e:{};return(0,v.useMemo)(()=>Object.entries(n).filter(e=>{let[n,t]=e;return!!t}).map(e=>{let[n]=e;return n}),[n])},A=()=>{let{conversation:e}=(0,p.r)(),{account:n}=(0,o.t)(),{track:t}=(0,r.z$)(),{mutate:a}=(0,i.Ck)(),{mutate:l}=(0,u.T$)(null==e?void 0:e.id);return{toggleMcpToolEnabled:(i,u)=>{if(!n)return;let r=Array.isArray(i)?i.reduce((e,n)=>({...e,[n]:u}),{}):{[i]:u};if(e){var o;l({settings:{enabled_mcp_tools:{...null===(o=e.conversationSettings)||void 0===o?void 0:o.enabled_mcp_tools,...r}}})}let c=n.settings.enabled_mcp_tools;a({...n.settings,enabled_mcp_tools:{...c,...r}}),t({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:"enabled_mcp_tools.".concat(i),value:u})},toggleMcpToolAlwaysApproved:(e,t,i)=>{if(!n)return;let u=z(e,t),r=n.settings.enabled_mcp_tools;a({...n.settings,enabled_mcp_tools:{...r,[u]:i}})}}};function w(e,n){return"".concat(e,":").concat(n)}let D=g.z.object({description:g.z.string().optional(),type:g.z.string().optional(),title:g.z.string().optional()}).optional();function z(e,n){let t=w(e,n.name),i=n.description||"",u=function(e){var n;let t=Object.entries((null===(n=e.inputSchema)||void 0===n?void 0:n.properties)||{}),i=[];for(let[e,n]of t){let{data:t}=D.safeParse(n),u=(null==t?void 0:t.description)||"";i.push([e,u])}return i.sort((e,n)=>e[0].localeCompare(n[0])).flat().join(",")}(n),r=d().createHash("md5").update("".concat(i,":").concat(u)).digest("hex");return"".concat(t,"-").concat(r)}},74339:function(e,n,t){t.d(n,{J$:function(){return d},Zf:function(){return c},fX:function(){return g},vc:function(){return s},yb:function(){return v}});var i=t(5362),u=t(27218),r=t(13262);t(10228);var o=t(77930);t(7653);var a=t(19132);let l=e=>{let{documentId:n}=e,{account:t,activeOrganization:o}=(0,u.t)(),a=null==t?void 0:t.uuid,l=null==o?void 0:o.uuid,c=d();return(0,i.WE)("/api/organizations/".concat(l,"/sync/mcp/outline/document/").concat(n),{queryKey:[r.q2,{accountUUID:a,orgUUID:l,documentId:n}],enabled:c})},c=e=>{let{uri:n}=e,{data:t,isLoading:i}=l({documentId:n});return{title:null==t?void 0:t.title,isLoading:i}},d=()=>{let{data:e}=(0,a.tc)();return!1},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,u.t)(),o=null==t?void 0:t.uuid,a=d(),{data:l,refetch:c}=(0,i.WE)("/api/organizations/".concat(o,"/sync/mcp/outline/auth"),{queryKey:[r.Sp,{accountUUID:null==n?void 0:n.uuid,orgUUID:o}],enabled:!!(t&&a),staleTime:5e3}),{mutate:s,isPending:v}=(0,i.uC)("/api/organizations/".concat(o,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&a),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),u=0;u<t;u++)i[u]=arguments[u];null===(n=e.onSuccess)||void 0===n||n.call(e,...i)}});return{isOutlineAuthenticated:!!(null==l?void 0:l.is_authenticated),refetch:c,initOutlineAuth:s,isLoadingOutlineAuthInit:v}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,u.t)(),a=null==n?void 0:n.uuid,l=null==t?void 0:t.uuid,c=d(),s=(0,o.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(l,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&c),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),u=0;u<t;u++)i[u]=arguments[u];s.invalidateQueries({queryKey:[r.Sp,{accountUUID:a,orgUUID:l}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...i)}})},g=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/integrations?redirect_url=".concat(e,"&open_outline_auth=true")}},85465:function(e,n,t){t.d(n,{M0:function(){return y},gE:function(){return f},lP:function(){return p}});var i=t(19170),u=t(28803),r=t(3053),o=t(27218),a=t(87033),l=t(10228),c=t(98649),d=t(91217),s=t(2949),v=t(89111),g=t(74339);let p=()=>{let{initGithubAuth:e}=(0,v.Yn)(),{initDriveAuth:n}=(0,s.nC)();return t=>{t===l.Fg.GITHUB?e():t===l.Fg.GDRIVE?n():t===l.Fg.OUTLINE&&(0,g.fX)()}},_=()=>{let e=(0,a.FL)("claudeai_paprika_sticky"),n=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia","enabled_mcp_tools","enabled_monkeys_in_a_barrel"];return e&&n.push("paprika_mode"),n},f=e=>{let{conversation:n,pendingConversationSettings:t}=(0,d.r)(),{account:i}=(0,o.t)(),u=_();if(n){var r;return null===(r=n.conversationSettings)||void 0===r?void 0:r[e]}return u.includes(e)?null==i?void 0:i.settings[e]:null==t?void 0:t[e]},y=()=>{let{conversation:e,setPendingConversationSettings:n}=(0,d.r)(),{account:t}=(0,o.t)(),a=_(),{track:l}=(0,r.z$)(),{mutate:s}=(0,i.Ck)(),{mutate:v}=(0,u.T$)(null==e?void 0:e.id);return{toggleConversationSetting:(i,u)=>{if(!t)return;let r={};e&&v({settings:{[i]:u,...r}}),a.includes(i)?s({...t.settings,[i]:u}):c.YA.includes(i)&&!e&&n({[i]:u,...r}),l({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:i,value:u})}}}},51879:function(e,n,t){t.d(n,{J:function(){return c},Q:function(){return l}});var i=t(27573),u=t(35919),r=t.n(u),o=t(7653);let a=(0,o.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:r(),closeModal:r(),clearCallerIdentifier:r()}),l=e=>{let{children:n}=e,[t,u]=(0,o.useState)(!1),r=(0,o.useRef)(void 0),[l,c]=(0,o.useState)(void 0);return(0,i.jsx)(a.Provider,{value:{isOpen:t,openModal:e=>{u(!0),r.current=e},closeModal:()=>{u(!1),c(r.current)},dropdownToOpen:l,clearCallerIdentifier:()=>{c(void 0)}},children:n})},c=()=>(0,o.useContext)(a)}}]);